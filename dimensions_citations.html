<div class="container" style="width:auto !important;  padding-right: 0; padding-left: 0">
    <h3>Most Cited</h3>
    
    <ul class="nav nav-tabs">
        <li class="active" style="color:#000"><a data-toggle="tab" href="#home">All</a></li>
        <li><a data-toggle="tab" href="#home" id="btn" style="color:#000">Recent</a></li>
    </ul>
    
    <div class="tab-content">
        <div id="home" class="tab-pane fade in active">
            
            <div id = "most_cited_block" class="mostCitedRead">
                <div class="mostRead">
                    
                    
                    <ul class="topContentViewList" style="margin:0 !important; padding-top: 1em;
                        ">
                        <li>   <p><img src="/templates/jsp/_style2/_mit/images/openAccess.gif" alt="Open Access" title="Open Access" class="accessIcon openAccess"/>&nbsp;<b><span class="title" id="title0"></span> (cited <span id="times_cited0"></span> times)</b><br/><span class="topContentViewInfo"><span class="authors"><span id="givens0"></span> <span id="familys0"></span> <span id="etal0"></span></span><br/> <span class="series">Network Neuroscience</span> <span class="volumeIssue" style="display:block!important;">Volume: <span id="vol0"></span>, Issue: <span id="issue0"></span>, pp. <span id="pages0"></span></span></span>
                        </p></li>
                        <li>
                            <p><img src="/templates/jsp/_style2/_mit/images/openAccess.gif" alt="Open Access" title="Open Access" class="accessIcon openAccess"/>&nbsp;<b><span class="title" id="title1"></span> (cited <span id="times_cited1"></span> times)</b><br/> <span class="topContentViewInfo"><span class="authors"><span id="givens1"></span> <span id="familys1"></span> <span id="etal1"></span></span><br/> <span class="series">Network Neuroscience</span><span class="volumeIssue" style="display:block!important;">Volume: <span id="vol1"></span>, Issue: <span id="issue1"></span>, pp. <span id="pages1"></span></span></span>
                            </p>
                        </li>
                        <li>
                            <p><img src="/templates/jsp/_style2/_mit/images/openAccess.gif" alt="Open Access" title="Open Access" class="accessIcon openAccess"/>&nbsp;<b><span class="title" id="title2"></span> (cited <span id="times_cited2"></span> times)</b><br/> <span class="topContentViewInfo"><span class="authors"><span id="givens2"></span> <span id="familys2"></span> <span id="etal2"></span></span><br/> <span class="series">Network Neuroscience</span><span class="volumeIssue" style="display:block!important;">Volume: <span id="vol2"></span>, Issue: <span id="issue2"></span>, pp. <span id="pages2"></span></span></span>
                            </p></li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="menu1" class="tab-pane fade">
            <div id = "most_cited_block" class="mostCitedRead">
                <div class="mostRead">
                    
                    
                    <ul class="topContentViewList" style="margin:0 !important; padding-top: 1em;
                        ">
                        <li>   <p><img src="/templates/jsp/_style2/_mit/images/openAccess.gif" alt="Open Access" title="Open Access" class="accessIcon openAccess"/>&nbsp;<b><span class="title" id="title0"></span> (cited <span id="times_cited0"></span> times)</b><br/><span class="topContentViewInfo"><span class="authors"><span id="givens0"></span> <span id="familys0"></span> <span id="etal0"></span></span><br/> <span class="series">Network Neuroscience</span> <span class="volumeIssue" style="display:block!important;">Volume: <span id="vol0"></span>, Issue: <span id="issue0"></span>, pp. <span id="pages0"></span></span></span>
                        </p></li>
                        <li>
                            <p><img src="/templates/jsp/_style2/_mit/images/openAccess.gif" alt="Open Access" title="Open Access" class="accessIcon openAccess"/>&nbsp;<b><span class="title" id="title1"></span> (cited <span id="times_cited1"></span> times)</b><br/> <span class="topContentViewInfo"><span class="authors"><span id="givens1"></span> <span id="familys1"></span> <span id="etal1"></span></span><br/> <span class="series">Network Neuroscience</span><span class="volumeIssue" style="display:block!important;">Volume: <span id="vol1"></span>, Issue: <span id="issue1"></span>, pp. <span id="pages1"></span></span></span>
                            </p>
                        </li>
                        <li>
                            <p><img src="/templates/jsp/_style2/_mit/images/openAccess.gif" alt="Open Access" title="Open Access" class="accessIcon openAccess"/>&nbsp;<b><span class="title" id="title2"></span> (cited <span id="times_cited2"></span> times)</b><br/> <span class="topContentViewInfo"><span class="authors"><span id="givens2"></span> <span id="familys2"></span> <span id="etal2"></span></span><br/> <span class="series">Network Neuroscience</span><span class="volumeIssue" style="display:block!important;">Volume: <span id="vol2"></span>, Issue: <span id="issue2"></span>, pp. <span id="pages2"></span></span></span>
                            </p></li>
                    </ul>
                </div>
            </div>

        </div>
    </div>
</div>



    <script>
        
        var dois =["https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00001", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00002", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00003", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00004", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00006", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00007", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00008", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00009", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00010", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00011", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00012", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00010", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00011", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00012", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00013", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00014", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00015", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00016", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00017", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00018", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00019", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00020", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00022", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00023", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00024", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00025", "https://metrics-api.dimensions.ai/doi/10.1162/NETN_a_00026"];
        
        var cited =[];
        var alldois =[];
        var zip =[];
        var i;
        var z;
        var doi = "";
        var times_cited;
        var l = dois.length;
        
        // Create a new multi array to store all the crossref info.
        var crossref_array = new Array(60);
        for (var i = 0; i < 60; i++) {
        crossref_array[i] = new Array(8);
        }

        
        //Call the Dimensions API and feed it each DOI for NETN
        //Here we pull three pieces of information:
        //a) the DOI
        //b) the total number of times an article was cited (times_cited)
        //c) the number of recent citations (recent_citations)
        //we then save each of those in a seperate array and zip the arrays together in the call back function that calls zipfunction()
        //The resultiung 3d array is stored in z, which has been sorted by number of citations
        //Then we call call_crossref(), which sifts through the DOIs and stores everything in crossref_array
        function call_dimensions(callback) {
        for (i = 0; i < l; i++) {
        $.getJSON(dois[i], function (data) {
        if (data) {
        times_cited = data.times_cited;
        recent_citations = data.recent_citations;
        console.log(recent_citations)
        doi = data.doi;
        cited.push(times_cited);
        alldois.push(doi);
        z = callback()
        } else {
        console.log("error");
        }
        });
        }
        }
        
        //Zip together cited numbers and dois. Then sort that array
        function zipfunction() {
        var zip = cited.map(function (e, i) {
        return[cited[i], alldois[i]];
        });
        zip.sort(function (a, b) {
        return a[0] - b[0];
        });
        return (zip);
        }
        
        //get that json file 
        function call_crossref(zip, callback) {
        first_most_cited_doi = zip[zip.length-1][1];
        second_most_cited_doi = zip[zip.length-2][1];
        third_most_cited_doi = zip[zip.length-3][1];
        first_most_cited_num = zip[zip.length-1][0];
        second_most_cited_num = zip[zip.length-2][0];
        third_most_cited_num = zip[zip.length-3][0];
        
        //Get the json files with all the crossref data
        // loop through each item in that json file and begin filling up crossref_array
        //We use another callback function to make sure the array is filles and the file has been looped through completely before calling print()
        //print()simply puts everything where it belongs in the HTML
        json_path = "https://mit-test.literatumonline.com/pb-assets/HTML-snippets/data.json"
        $.getJSON(json_path, function (data) {
        
        for (i = 0; i < 55; i++) {
        
        fdoi = data.message.items[i].DOI
        ftitle = data.message.items[i].title[0]
        fgiven = data.message.items[i].author[0].given;
        ffamily = data.message.items[i].author[0].family;
        fvol = data.message.items[i].volume
        fiss = data.message.items[i].issue
        fpages = data.message.items[i].page;
        furl = data.message.items[i].URL;
        crossref_array[i][0] = fdoi;
        crossref_array[i][1] = ftitle;
        crossref_array[i][2] = fgiven;
        crossref_array[i][3] = ffamily;
        crossref_array[i][4] = fvol;
        crossref_array[i][5] = fiss;
        crossref_array[i][6] = fpages;
        crossref_array[i][7] = furl;
        }
        callback();
        });
        
        }
        
        //print content to page
        function print(){
        for (i = 0; i < 55; i++) {
        // first most cited
        if (first_most_cited_doi == crossref_array[i][0]){
        document.getElementById("times_cited0").innerHTML = first_most_cited_num;
        document.getElementById("givens0").innerHTML = crossref_array[i][2];
        document.getElementById("familys0").innerHTML = crossref_array[i][3];
        document.getElementById("familys0").innerHTML = crossref_array[i][3];
        document.getElementById("vol0").innerHTML = crossref_array[i][4];
        document.getElementById("issue0").innerHTML = crossref_array[i][5];
        document.getElementById("pages0").innerHTML = crossref_array[i][6];
        document.getElementById("title0").innerHTML = "<a href='"+ crossref_array[i][7] + "'>" + crossref_array[i][1] + "</a>";
        }
        
        // second most cited
        if (second_most_cited_doi == crossref_array[i][0]){
        document.getElementById("times_cited1").innerHTML = second_most_cited_num;
        document.getElementById("givens1").innerHTML = crossref_array[i][2];
        document.getElementById("familys1").innerHTML = crossref_array[i][3];
        document.getElementById("familys1").innerHTML = crossref_array[i][3];
        document.getElementById("vol1").innerHTML = crossref_array[i][4];
        document.getElementById("issue1").innerHTML = crossref_array[i][5];
        document.getElementById("pages1").innerHTML = crossref_array[i][6];
        document.getElementById("title1").innerHTML = "<a href='"+ crossref_array[i][7] + "'>" + crossref_array[i][1] + "</a>";
        }
        
        // third most cited
        if (third_most_cited_doi == crossref_array[i][0]){
        document.getElementById("times_cited2").innerHTML = third_most_cited_num;
        document.getElementById("givens2").innerHTML = crossref_array[i][2];
        document.getElementById("familys2").innerHTML = crossref_array[i][3];
        document.getElementById("familys2").innerHTML = crossref_array[i][3];
        document.getElementById("vol2").innerHTML = crossref_array[i][4];
        document.getElementById("issue2").innerHTML = crossref_array[i][5];
        document.getElementById("pages2").innerHTML = crossref_array[i][6];
        document.getElementById("title2").innerHTML = "<a href='"+ crossref_array[i][7] + "'>" + crossref_array[i][1] + "</a>";
        }
        
        }

        
        }
        call_dimensions(zipfunction);
        
        
        
        setTimeout(function () {
        call_crossref(z, print)
        },
        800);
        
        
        var x = document.getElementById("btn");
        x.addEventListener("click", mySecondFunction);
        
        function mySecondFunction() {
        document.getElementById("menu1").innerHTML = document.getElementById(most_cited_block);
            }
        
    </script>
